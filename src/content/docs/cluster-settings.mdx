Use these configuration items to build up a cluster of Steep instances. Under
the hood, Steep uses [Vert.x](https://vertx.io/) and [Hazelcast](https://hazelcast.com/),
so these configuration items are very similar to the ones found in these two
frameworks. To build up a cluster, you need to configure an event bus connection
and a cluster connection. They should use different ports. `host` typically
refers to the machine your instance is running on and `publicHost` or
`publicAddress` specify the hostname or IP address that your Steep instance will
use in your network to advertise itself so that other instances can connect to
it.

For more information, please read the documentation of [Vert.x](https://vertx.io/)
and [Hazelcast](https://hazelcast.com/).

`steep.cluster.eventBus.host`

> The IP address (or hostname) to bind the clustered eventbus to

> **Default:** Automatically detected local network interface

`steep.cluster.eventBus.port`

> The port the clustered eventbus should listen on

> **Default:** A random port

`steep.cluster.eventBus.publicHost`

> The IP address (or hostname) the eventbus uses to announce itself within in the cluster

> **Default:** Same as `steep.cluster.eventBus.host`

`steep.cluster.eventBus.publicPort`

> The port that the eventbus uses to announce itself within in the cluster

> **Default:** Same as `steep.cluster.eventBus.port`

`steep.cluster.hazelcast.clusterName`

> An optional cluster name that can be used to separate clusters of Steep instances. Two instances from different clusters (with different names) cannot connect to each other.

> By default, no cluster name is set, which means all instances can connect to each other. However, a Steep instance without a cluster name cannot connect to a named cluster.

> *Heads up:* if you have a cluster name set and you're using a <DocsLink href="#cloud-connection">cloud connection</DocsLink> to deploy remote agents on demand, make sure these Steep instances use the same cluster name. Otherwise, you won't be able to connect to them.

`steep.cluster.hazelcast.publicAddress`

> The IP address (or hostname) and port Hazelcast uses to announce itself within in the cluster

`steep.cluster.hazelcast.port`

> The port that Hazelcast should listen on

`steep.cluster.hazelcast.interfaces`

> A list of IP address patterns specifying valid interfaces Hazelcast should bind to

`steep.cluster.hazelcast.members`

> A list of IP addresses (or hostnames) of Hazelcast cluster members

`steep.cluster.hazelcast.tcpEnabled`

> `true` if Hazelcast should use TCP to connect to other instances, `false` if it should use multicast

> **Default:** `false`

`steep.cluster.hazelcast.restoreMembersOnStartup.enabled`

> `true` if Steep should try to load IP addresses of possibly still running VMs from its database during startup and add them to `steep.cluster.hazelcast.members`. This is useful if a Steep instance has crashed and should be reintegrated into an existing cluster when it's back.

> **Default:** `false`

`steep.cluster.hazelcast.restoreMembersOnStartup.defaultPort`

> If `steep.cluster.hazelcast.restoreMembersOnStartup.enabled` is `true`, potential Hazelcast cluster members will be restored from database. This configuration item specifies on which Hazelcast port these members are listening.

`steep.cluster.hazelcast.placementGroupName`

> An optional name specifying in which group this Hazelcast member should be placed. Steep uses [distributed maps](https://docs.hazelcast.com/hazelcast/5.1/data-structures/map) to share data between instances. Data in these maps is partitioned (i.e. distributed to the individual cluster members). In a large cluster, no member keeps all the data. Most nodes only keep a small fraction of the data (a partition).

> To make sure data is not lost if a member goes down, Hazelcast uses backups to distribute copies of the data across the cluster. By specifying a placement group, you can control how Hazelcast distributes these backups. Hazelcast will always prefer creating backups in a group that does not own the data so that if all members of a group go down, the other group still has all the backup data.

> Examples for sensible groups are racks, data centers, or availability zones.

> For more information, see the following links:

> * https://docs.hazelcast.com/hazelcast/5.1/architecture/data-partitioning
> * https://docs.hazelcast.com/hazelcast/5.1/clusters/partition-group-configuration
> * https://docs.hazelcast.com/hazelcast/5.1/data-structures/backing-up-maps

> Note that if you configure a placement group name, all members in your cluster must also have a placement group name. Otherwise, you will receive an exception about mismatching configuration on startup.

`steep.cluster.hazelcast.liteMember`

> `true` if this instance should be a [Hazelcast lite member](https://docs.hazelcast.com/hazelcast/5.1/maintain-cluster/lite-members). Lite members do not own any in-memory data. They are mainly used for compute-intensive tasks. With regard to Steep, an instance with a controller and a scheduler should not be a lite member, because these components heavily rely on internal state. A Steep instance that only contains an agent and therefore only executes services, however, could be a lite member. See the <DocsLink href="#software-architecture">architecture section</DocsLink> for more information about these components.

> Your cluster cannot consist of only lite members. Otherwise, it is not able to maintain internal state at all.

> Note that since lite members cannot keep data, they are not suitable to keep backups either. See `steep.cluster.hazelcast.placementGroupName` for more information. For reasons of reliability, a cluster should contain at least three full (i.e. non-lite) members.

`steep.cluster.lookupOrphansInterval`

> The interval at which Steep's main thread looks for orphaned entries in its internal remote agent registry (specified as a <DocsLink href="#durations">duration</DocsLink>). Such entries may (very rarely) happen if there is a network failure during deregistration of an agent. You normally do not have to change this configuration.

> **Default:** 5m
